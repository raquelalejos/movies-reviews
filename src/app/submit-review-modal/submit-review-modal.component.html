<!--
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
-->

<div class="add-dialog-container" *ngIf="auth.currentUser && (addingReview || (ownReviews | async)?.length === 0 )">
  <h1>Add a review!</h1>

  <div id="star-rating-container">
    <i
      hidden
      class="template material-icons star-rating"
      [style.color]="determineStarColor(1)"
      id="star-border-icon"
      (mouseenter)="review.rating = 1"
      >star</i
    >
    <i
      hidden
      class="template material-icons star-rating"
      [style.color]="determineStarColor(2)"
      id="star-border-icon"
      (mouseenter)="review.rating = 2"
      >star</i
    >
    <i
      hidden
      class="template material-icons star-rating"
      [style.color]="determineStarColor(3)"
      id="star-border-icon"
      (mouseenter)="review.rating = 3"
      >star</i
    >
    <i
      hidden
      class="template material-icons star-rating"
      [style.color]="determineStarColor(4)"
      id="star-border-icon"
      (mouseenter)="review.rating = 4"
      >star</i
    >
    <i
      hidden
      class="template material-icons star-rating"
      [style.color]="determineStarColor(5)"
      id="star-border-icon"
      (mouseenter)="review.rating = 5"
      >star</i
    >
  </div>

  <mat-form-field id="title-input-field">
    <span class="review-label">Title</span>
    <input
      matInput
      type="text"
      [(ngModel)]="review.title"
      [value]="review.title"
      placeholder="Title"
    />
  </mat-form-field>

  <mat-form-field id="review-input-field">
    <span class="review-label">Review</span>
    <textarea matInput placeholder="Review" [(ngModel)]="review.body">
    </textarea>
  </mat-form-field>

  <mat-dialog-actions id="action-buttons">
    <button class="btn btn-clear sign-in-button" (click)="onCancelClick()">Cancel</button>
    <button class="btn btn-dark sign-in-button" (click)="onSubmitClick()">Submit</button>
  </mat-dialog-actions>
</div>

<div id="no-user-container" *ngIf="!auth.currentUser">
  <h2 id="no-user-text">Must be signed in to submit a review!</h2>
</div>

<div id="no-user-container" *ngIf="auth.currentUser && !addingReview && (ownReviews | async)?.length">
  <h2 id="no-user-text">You have already submitted a review!</h2>
</div>
